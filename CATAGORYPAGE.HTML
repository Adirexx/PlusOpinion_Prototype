<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- SEO Meta Tags -->
    <title>Product Categories - PlusOpinion | Browse Reviews by Category</title>
    <meta name="description"
        content="Explore product reviews across all categories - Electronics, Fashion, Food, Automotive, and more. Find authentic consumer opinions organized by product type.">
    <meta name="keywords"
        content="product categories, electronics reviews, fashion reviews, food reviews, automotive reviews, category browse, product types">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D42E61TP4M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-D42E61TP4M');
    </script>

    <!-- Favicon for browser tabs -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icon-192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-192.png">

    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#020205">
    <link rel="icon" href="./icon-192.png">
    <link rel="icon" href="./icon-512.png">


    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Global Design System -->
    <link rel="stylesheet" href="./global.css">

    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#020205">

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>

    <script src="./runtime.js"></script>
    <script src="./data.seed.js"></script>
    <script src="./bridge.js"></script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <!-- Visual Tokens (MATCHING HOMEPAGE_FINAL.HTML) -->
    <style>
        :root {
            --font-body: 'Inter', system-ui, -apple-system, sans-serif;
            --font-heading: 'Space Grotesk', system-ui, serif;

            --bg-deep: #020205;
            --neon: #2f8bff;
            --neon-weak: rgba(47, 139, 255, 0.18);
            --muted: rgba(255, 255, 255, 0.65);
            --card: rgba(255, 255, 255, 0.04);
            --glass-border: rgba(255, 255, 255, 0.08);
            --accent-green: #6BFFB6;

            --radius: 16px;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            background-color: var(--bg-deep);
            color: white;
            font-family: var(--font-body);
            -webkit-tap-highlight-color: transparent;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- ALIVE BACKGROUND --- */
        .ambient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at 50% 0%, #0a0e1c 0%, var(--bg-deep) 80%);
            z-index: -2;
            pointer-events: none;
            transform: translateZ(0);
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.6;
            animation: breathe 8s infinite ease-in-out alternate;
            will-change: transform, opacity;
        }

        .orb-1 {
            top: -10%;
            left: -20%;
            width: 70vw;
            height: 70vw;
            background: radial-gradient(circle, #2f8bff, transparent);
            animation-duration: 10s;
        }

        .orb-2 {
            bottom: -10%;
            right: -20%;
            width: 80vw;
            height: 80vw;
            background: radial-gradient(circle, #4f46e5, transparent);
            animation-duration: 14s;
        }

        @keyframes breathe {
            0% {
                transform: scale(1);
                opacity: 0.5;
            }

            100% {
                transform: scale(1.1);
                opacity: 0.7;
            }
        }

        /* --- APP CONTAINER --- */
        #root {
            width: 100%;
            height: 100%;
            max-width: 450px;
            background-color: rgba(3, 4, 18, 0.65);
            backdrop-filter: blur(16px);
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 80px rgba(0, 0, 0, 0.8);
            overflow: hidden;
        }

        /* --- UTILITIES --- */
        .font-heading {
            font-family: var(--font-heading);
        }

        .glass-panel {
            background: var(--card);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            transform: translate3d(0, 0, 0);
        }

        .nav-glass {
            background: rgba(3, 4, 18, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
        }

        .top-nav-glass {
            background: rgba(3, 4, 18, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .touch-scale:active {
            transform: scale(0.96);
            transition: transform 0.1s;
        }

        /* 3D CUBOID CARD EFFECT */
        .cat-card-3d {
            position: relative;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.02) 100%);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 1px solid rgba(255, 255, 255, 0.05);
            border-right: 1px solid rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(0, 0, 0, 0.4);
            box-shadow:
                0 4px 6px rgba(0, 0, 0, 0.3),
                0 10px 20px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transform-style: preserve-3d;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .cat-card-3d:active {
            transform: translateY(2px) scale(0.98);
            box-shadow:
                0 2px 4px rgba(0, 0, 0, 0.2),
                inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Subtle Tint Overlay based on Theme Color */
        .cat-card-3d::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom right, var(--tint-color), transparent);
            opacity: 0.08;
            pointer-events: none;
            border-radius: inherit;
        }

        /* DRAWER PERFORMANCE OPTIMIZATIONS */
        .drawer-overlay {
            background: rgba(0, 0, 0, 0.6);
            /* REMOVED BACKDROP BLUR for Performance during animation */
            transition: opacity 0.3s ease;
        }

        /* Forces GPU rendering */
        .hardware-accelerated {
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        /* Animations */
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Icon Box */
        .icon-box {
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .icon-box::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.25), transparent, rgba(0, 0, 0, 0.1));
            transform: rotate(45deg);
            pointer-events: none;
        }
    </style>

    <script>
        import { supabase } from "./supabase.js";

        supabase.auth.onAuthStateChange((event, session) => {
            if (!session) {
                window.location.href = "index.html";
            }
        });
    </script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { neon: 'var(--neon)', muted: 'var(--muted)' },
                    fontFamily: { heading: ['Space Grotesk', 'serif'] }
                }
            }
        }
    </script>
</head>

<body>
    <div class="ambient-bg">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;

        // ðŸ”— GLOBAL NAVIGATION FUNCTION (PASTE HERE)
        const goTo = (page) => {
            window.scrollTo(0, 0);
            window.location.href = page;
        };

        function dispatchAction(action) {
            if (window.PlusOpinionActions && window.PlusOpinionActions[action]) {
                // Already on homepage
                window.PlusOpinionActions[action]();
            } else {
                // On another page â†’ redirect with hash
                window.location.href = `HOMEPAGE_FINAL.HTML#${action.replace('open', '').toLowerCase()}`;
            }
        }

        const triggerAction = (action) => {
            if (window.PlusOpinionActions?.[action]) {
                window.PlusOpinionActions[action]();
            } else {
                window.location.href = `HOMEPAGE_FINAL.HTML#${action.replace('open', '').toLowerCase()}`;
            }
        };

        // ðŸ” PAGE â†’ TAB MAP (GLOBAL)
        const PAGE_TAB_MAP = {
            'HOMEPAGE_FINAL.HTML': 'home',
            'CATAGORYPAGE.HTML': 'categories',
            'MY SPACE FINAL (USER).HTML': 'myspace',
            'NOTIFICATION PANEL.HTML': 'notifs',
            'PRIVATE OWNER PROFILE.HTML': 'profile'
        };

        // --- ICONS ---
        const Icons = {
            Home: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><polyline points="9 22 9 12 15 12 15 22" /></svg>,
            Grid: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><rect width="7" height="7" x="3" y="3" rx="1" /><rect width="7" height="7" x="14" y="3" rx="1" /><rect width="7" height="7" x="14" y="14" rx="1" /><rect width="7" height="7" x="3" y="14" rx="1" /></svg>,
            User: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></svg>,
            Bell: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" /><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0" /></svg>,
            Search: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" /></svg>,
            ChevronRight: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6" /></svg>,
            ChevronLeft: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m15 18-6-6 6-6" /></svg>,
            Menu: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12" /><line x1="4" x2="20" y1="6" y2="6" /><line x1="4" x2="20" y1="18" y2="18" /></svg>,
            Cpu: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="4" width="16" height="16" rx="2" /><rect x="9" y="9" width="6" height="6" /><line x1="9" x2="9" y1="1" y2="4" /><line x1="15" x2="15" y1="1" y2="4" /><line x1="9" x2="9" y1="20" y2="23" /><line x1="15" x2="15" y1="20" y2="23" /><line x1="20" x2="23" y1="9" y2="9" /><line x1="20" x2="23" y1="14" y2="14" /><line x1="1" x2="4" y1="9" y2="9" /><line x1="1" x2="4" y1="14" y2="14" /></svg>,
            Shirt: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M20.38 3.46L16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z" /></svg>,
            Coffee: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M17 8h1a4 4 0 1 1 0 8h-1" /><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z" /><line x1="6" x2="6" y1="2" y2="6" /><line x1="10" x2="10" y1="2" y2="6" /><line x1="14" x2="14" y1="2" y2="6" /></svg>,
            Car: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2" /><circle cx="7" cy="17" r="2" /><circle cx="17" cy="17" r="2" /></svg>,
            Heart: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" /></svg>,
            Landmark: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><line x1="3" x2="21" y1="22" y2="22" /><line x1="6" x2="6" y1="18" y2="11" /><line x1="10" x2="10" y1="18" y2="11" /><line x1="14" x2="14" y1="18" y2="11" /><line x1="18" x2="18" y1="18" y2="11" /><polygon points="12 2 20 7 4 7" /></svg>,
            Armchair: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3" /><path d="M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z" /><path d="M5 18v2" /><path d="M19 18v2" /></svg>,
            BookOpen: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></svg>,
            Plane: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12h5" /><path d="M13 12h3" /><path d="M13 2c7.75 0 8.97 2.47 9 10 0 8.95-3.6 9.87-9 10" /><path d="M10 16.6c5.56.86 10-.9 10-4.6 0-4.66-6.66-2-6-6" /></svg>,
            Plus: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><path d="M12 5v14M5 12h14" /></svg>,
            X: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18M6 6 18 12" /></svg>,
            Trending: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18" /><polyline points="17 6 23 6 23 12" /></svg>,
            Briefcase: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="14" x="2" y="7" rx="2" ry="2" /><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" /></svg>,
            Gamepad: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><line x1="6" x2="10" y1="12" y2="12" /><line x1="8" x2="8" y1="10" y2="14" /><line x1="15" x2="15.01" y1="13" y2="13" /><line x1="18" x2="18.01" y1="11" y2="11" /><rect width="20" height="12" x="2" y="6" rx="2" /></svg>,
            Music: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M9 18V5l12-2v13" /><circle cx="6" cy="18" r="3" /><circle cx="18" cy="16" r="3" /></svg>,
            Paw: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="5" r="2" /><circle cx="6" cy="8" r="2" /><circle cx="18" cy="8" r="2" /><path d="M18.8 13.9a3.6 3.6 0 0 0-3.6-2.9 3.6 3.6 0 0 0-3.6 2.9 3.6 3.6 0 0 1-7.2 0 6 6 0 0 1 12 0 3.6 3.6 0 0 0 2.4-3Z" /></svg>,
            Camera: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" /><circle cx="12" cy="13" r="3" /></svg>,
            Dumbbell: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m6.5 6.5 11 11" /><path d="m21 21-1-1" /><path d="m3 3 1 1" /><path d="m18 22 4-4" /><path d="m2 6 4-4" /><path d="m3 10 7-7" /><path d="m14 21 7-7" /></svg>,
            Tent: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M3.5 21 14 3" /><path d="M20.5 21 10 3" /><path d="M15.5 21 12 15l-3.5 6" /><path d="M2 21h20" /></svg>,
            MySpaceLogo: (p) => (
                <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M11 3L3 22" strokeLinejoin="bevel" />
                    <path d="M21 22L11 3" strokeLinejoin="bevel" />
                    <path d="M22 8L4 18" strokeWidth="2.5" />
                </svg>
            )
        };

        const Icon = ({ icon, size = 20, className = "" }) => {
            const Component = Icons[icon];
            if (!Component) return null;
            return <Component width={size} height={size} className={className} />;
        };

        const vibrate = (pattern = 5) => {
            if (typeof navigator !== 'undefined' && navigator.vibrate) {
                navigator.vibrate(pattern);
            }
        };

        const categoriesState = window.PlusOpinion?.state?.categories;

        if (!categoriesState) {
            throw new Error("Categories data not loaded. Check runtime.js and data.seed.js");
        }

        // --- VAST DATA STRUCTURE ---
        const {
            DEEP_DB,
            POPULAR_KEYS,
            GROWING_KEYS,
            ALL_KEYS
        } = window.PlusOpinion.state.categories;

        // --- COMPONENTS ---

        // REPLACED WITH MY SPACE NAV BAR COMPONENT
        const NavItem = ({ icon, label, isActive, onClick, isMySpace }) => (
            <button onClick={onClick} className={`flex-1 flex flex-col items-center justify-center gap-1 group relative active:scale-90 transition-transform h-full`}>
                <div className={`relative p-1.5 rounded-xl transition-all duration-300 ${isActive ? 'bg-white/5 scale-105' : ''}`}>
                    <Icon icon={icon} size={24} className={`transition-all duration-300 ${isActive ? 'text-white drop-shadow-[0_0_5px_rgba(255,255,255,0.5)]' : 'text-muted group-hover:text-white'}`} />
                    {isMySpace && isActive && <div className="absolute inset-0 bg-neon/20 blur-xl rounded-full"></div>}
                </div>
            </button>
        );

        // REPLACED WITH MY SPACE BOTTOM NAV
        const BottomNav = ({ activeTab }) => (
            <div className="fixed bottom-0 w-full h-[65px] px-2 pb-2 flex justify-between items-center z-40 bg-[#020205]/95 backdrop-blur-xl border-t border-white/10 max-w-[450px]">
                <NavItem icon="Home" label="Home" isActive={activeTab === 'home'} onClick={() => goTo('HOMEPAGE_FINAL.HTML')} />
                <NavItem icon="Grid" label="Categories" isActive={activeTab === 'categories'} onClick={() => goTo('CATAGORYPAGE.HTML')} />
                <NavItem icon="MySpaceLogo" label="My Space" isActive={activeTab === 'myspace'} onClick={() => goTo('MY%20SPACE%20FINAL%20(USER).HTML')} isMySpace={true} />
                <NavItem icon="Bell" label="Notifications" isActive={activeTab === 'notifs'} onClick={() => goTo('NOTIFICATION%20PANEL.HTML')} />
                <NavItem icon="User" label="Profile" isActive={activeTab === 'profile'} onClick={() => goTo('PRIVATE%20OWNER%20PROFILE.HTML')} />
            </div>
        );

        // 3D CUBOID CARD
        const CategoryCard = ({ cat, onClick, type = 'standard' }) => (
            <div
                onClick={() => { vibrate(5); onClick(cat); }}
                className={`cat-card-3d rounded-2xl flex flex-col justify-between cursor-pointer group bg-white/5
                    ${type === 'growing' ? 'min-w-[140px] w-[140px] p-3 h-[120px] snap-start' : 'p-4 h-[110px]'}
                `}
                style={{ '--tint-color': cat.color }}
            >
                <div className="flex justify-between items-start relative z-10">
                    {/* INTERESTING ICON BOX: Colored, Slight Gradient Overlay */}
                    <div
                        className="w-10 h-10 rounded-xl flex items-center justify-center text-white shadow-lg icon-box transition-all duration-300 group-active:scale-90"
                        style={{ backgroundColor: cat.color }}
                    >
                        <Icon icon={cat.icon} size={20} className="text-white relative z-10" />
                    </div>
                    {type === 'growing' && (
                        <div className="flex items-center gap-1 text-[10px] font-bold text-accent-green">
                            <Icon icon="Trending" size={10} /> {cat.trend}
                        </div>
                    )}
                </div>
                <div className="relative z-10 mt-auto">
                    <h3 className={`font-heading font-bold text-white tracking-wide drop-shadow-sm ${type === 'growing' ? 'text-sm' : 'text-sm'}`}>{cat.title}</h3>
                    {type !== 'growing' && <span className="text-[10px] text-muted">{cat.count} opinions</span>}
                </div>
            </div>
        );

        // List Item for "All Categories"
        const ListItem = ({ cat, onClick }) => (
            <div
                onClick={() => { vibrate(5); onClick(cat); }}
                className="flex items-center justify-between p-4 rounded-xl border border-white/5 bg-white/5 active:bg-white/10 transition-colors cursor-pointer group"
            >
                <div className="flex items-center gap-4">
                    {/* INTERESTING ICON BOX: Colored, Slight Gradient Overlay */}
                    <div
                        className="w-8 h-8 rounded-lg flex items-center justify-center text-white shadow-sm icon-box transition-transform duration-300 group-active:scale-90"
                        style={{ backgroundColor: cat.color }}
                    >
                        <Icon icon={cat.icon} size={16} className="text-white relative z-10" />
                    </div>
                    <span className="text-sm font-medium text-white">{cat.title}</span>
                </div>
                <Icon icon="ChevronRight" size={16} className="text-muted" />
            </div>
        );

        // DEEP DRAWER
        const DeepDrawer = ({ isOpen, onClose, category }) => {
            const [viewLevel, setViewLevel] = useState('subs'); // subs -> brands -> models
            const [selectedSub, setSelectedSub] = useState(null);
            const [selectedBrand, setSelectedBrand] = useState(null);
            const [isDragging, setIsDragging] = useState(false);

            // Get Data
            const subData = category ? (DEEP_DB[category.id]?.subs || []) : [];

            // Reset
            useEffect(() => {
                setViewLevel('subs');
                setSelectedSub(null);
                setSelectedBrand(null);
            }, [category]);

            const handleSubClick = (sub) => {
                vibrate(5);
                if (sub.brands && sub.brands.length > 0) {
                    setSelectedSub(sub);
                    setViewLevel('brands');
                } else {
                    console.log("Future Feed:", sub.title);
                }
            };

            const handleBrandClick = (brand) => {
                vibrate(5);
                if (brand.models && brand.models.length > 0) {
                    setSelectedBrand(brand);
                    setViewLevel('models');
                } else {
                    alert("Opening Feed for " + brand.name);
                }
            };

            const goBack = () => {
                vibrate(5);
                if (viewLevel === 'models') setViewLevel('brands');
                else if (viewLevel === 'brands') setViewLevel('subs');
                else onClose();
            };

            return (
                <AnimatePresence>
                    {isOpen && (
                        <>
                            <motion.div
                                initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
                                className="fixed inset-0 z-50 drawer-overlay" onClick={onClose}
                            />
                            <motion.div
                                initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }}
                                transition={{ type: "spring", stiffness: 400, damping: 30 }}
                                drag="y" dragConstraints={{ top: 0, bottom: 0 }} dragElastic={{ top: 0, bottom: 0.2 }}
                                onDragEnd={(e, { offset, velocity }) => {
                                    if (offset.y > 100 || velocity.y > 200) onClose();
                                }}
                                className="fixed bottom-0 left-0 right-0 max-w-[450px] mx-auto z-50 bg-[#0B0F19] drawer-content rounded-t-[32px] border-t border-white/10 h-[80vh] flex flex-col overflow-hidden shadow-2xl hardware-accelerated"
                            >
                                {/* Draggable Handle */}
                                <div className="flex justify-center pt-3 pb-2 cursor-grab active:cursor-grabbing w-full bg-[#0B0F19]" onPointerDown={() => setIsDragging(true)}>
                                    <div className="w-12 h-1.5 bg-white/20 rounded-full"></div>
                                </div>

                                {/* Header */}
                                <div className="px-6 pt-2 pb-4 border-b border-white/5 flex items-center justify-between bg-[#0B0F19]">
                                    <div className="flex items-center gap-3">
                                        {(viewLevel !== 'subs') && (
                                            <button onClick={goBack} className="p-1 -ml-2 text-muted hover:text-white"><Icon icon="ChevronLeft" size={24} /></button>
                                        )}
                                        <div>
                                            <h2 className="text-xl font-heading font-bold text-white">
                                                {viewLevel === 'subs' ? category.title :
                                                    viewLevel === 'brands' ? selectedSub.title :
                                                        selectedBrand.name}
                                            </h2>
                                            <div className="flex items-center gap-2 mt-1">
                                                <div className="w-1.5 h-1.5 rounded-full bg-neon animate-pulse"></div>
                                                <p className="text-[10px] text-neon font-medium uppercase tracking-wide">Live Insights & Trends</p>
                                            </div>
                                        </div>
                                    </div>
                                    <button onClick={onClose} className="p-2 bg-white/5 rounded-full text-muted touch-scale"><Icon icon="X" size={18} /></button>
                                </div>

                                {/* Content List */}
                                <div className="flex-1 overflow-y-auto p-4 pb-10 overscroll-contain">
                                    <h3 className="text-[10px] text-muted font-bold uppercase tracking-widest mb-3 pl-1">
                                        {viewLevel === 'subs' ? 'Top Niches' : viewLevel === 'brands' ? 'Popular Brands' : 'Top Models'}
                                    </h3>

                                    <div className="space-y-2 animate-fade-in">
                                        {viewLevel === 'subs' && (
                                            subData.length > 0 ? subData.map((sub, i) => (
                                                <div key={i} onClick={() => handleSubClick(sub)} className="flex items-center justify-between p-4 rounded-xl bg-white/5 border border-white/5 active:bg-white/10 transition-colors cursor-pointer group">
                                                    <div className="flex items-center gap-3">
                                                        <div className="w-1.5 h-1.5 rounded-full bg-white/20 group-hover:bg-neon transition-colors"></div>
                                                        <span className="text-sm font-medium text-gray-200 group-hover:text-white">{sub.title}</span>
                                                    </div>
                                                    <Icon icon="ChevronRight" size={16} className="text-muted" />
                                                </div>
                                            )) : <div className="text-center text-muted text-sm py-8">No data yet.</div>
                                        )}

                                        {viewLevel === 'brands' && (
                                            selectedSub.brands.map((brand, i) => (
                                                <div key={i} onClick={() => handleBrandClick(brand)} className="flex items-center justify-between p-4 rounded-xl bg-white/5 border border-white/5 active:bg-white/10 transition-colors cursor-pointer group">
                                                    <span className="text-sm font-medium text-white">{brand.name}</span>
                                                    <Icon icon="ChevronRight" size={16} className="text-muted" />
                                                </div>
                                            ))
                                        )}

                                        {viewLevel === 'models' && (
                                            selectedBrand.models.map((model, i) => (
                                                <div key={i} className="flex items-center justify-between p-4 rounded-xl bg-white/5 border border-white/5 active:bg-white/10 transition-colors cursor-pointer">
                                                    <span className="text-sm font-medium text-white">{model}</span>
                                                    <span className="text-[10px] text-neon bg-neon/10 px-2 py-1 rounded">View</span>
                                                </div>
                                            ))
                                        )}
                                    </div>
                                </div>

                                {/* Footer CTA */}
                                <div className="p-4 border-t border-white/5 bg-[#0B0F19]">
                                    <button className="w-full bg-white text-black font-bold py-3.5 rounded-xl text-sm shadow-lg active:scale-95 transition-transform">
                                        Explore Category Feed
                                    </button>
                                </div>
                            </motion.div>
                        </>
                    )}
                </AnimatePresence>
            );
        };

        const App = () => {
            const [selectedCategory, setSelectedCategory] = useState(null);
            const activeTab = 'categories';

            return (
                <div className="flex-1 flex flex-col h-full relative">

                    {/* Header (Clean Text Only) */}
                    <div className="h-[60px] top-nav-glass flex items-center justify-between px-5 sticky top-0 z-30 shrink-0">
                        <div className="flex items-center gap-3">
                            <button
                                onClick={() => {
                                    triggerAction('openMenu');
                                }}
                                className="touch-scale"
                            >
                                <Icon icon="Menu" size={22} className="text-white/80" />
                            </button>
                            <span className="font-heading font-bold text-lg tracking-wide text-white">Categories</span>
                        </div>
                        <button
                            onClick={() => {
                                triggerAction('openLens');
                            }}
                            className="touch-scale"
                        >
                            <Icon icon="Search" size={22} className="text-white" />
                        </button>
                    </div>

                    {/* Content */}
                    <div className="flex-1 overflow-y-auto px-4 pt-6 pb-24 no-scrollbar">

                        {/* 1. POPULAR SECTION */}
                        <div className="mb-8">
                            <div className="flex items-center gap-2 mb-4 px-1">
                                <div className="w-1 h-4 bg-neon rounded-full"></div>
                                <h2 className="text-sm font-heading font-bold text-white tracking-wide">Popular Categories</h2>
                            </div>
                            <div className="grid grid-cols-2 gap-3">
                                {POPULAR_KEYS.map(key => (
                                    <CategoryCard key={key} cat={DEEP_DB[key]} onClick={setSelectedCategory} />
                                ))}
                            </div>
                        </div>

                        {/* 2. GROWING FAST SECTION */}
                        <div className="mb-8">
                            <div className="flex items-center gap-2 mb-4 px-1">
                                <Icon icon="Trending" size={16} className="text-accent-green" />
                                <h2 className="text-sm font-heading font-bold text-white tracking-wide">Growing Fast</h2>
                            </div>
                            {/* FIXED: Consistent padding with pl-1 */}
                            <div className="flex gap-3 overflow-x-auto no-scrollbar pb-2 -mx-4 px-4 snap-x snap-mandatory">
                                {GROWING_KEYS.map(key => (
                                    <CategoryCard key={key} cat={DEEP_DB[key]} type="growing" onClick={setSelectedCategory} />
                                ))}
                            </div>
                        </div>

                        {/* 3. ALL CATEGORIES SECTION */}
                        <div>
                            <div className="flex items-center justify-between mb-4 px-1">
                                <h2 className="text-sm font-heading font-bold text-muted tracking-wide">All Categories</h2>
                                <Icon icon="Grid" size={14} className="text-muted" />
                            </div>
                            <div className="flex flex-col gap-2">
                                {ALL_KEYS.map(key => (
                                    <ListItem key={key} cat={DEEP_DB[key]} onClick={setSelectedCategory} />
                                ))}
                            </div>
                        </div>

                        {/* Spacer */}
                        <div className="h-10"></div>
                    </div>

                    <BottomNav activeTab={activeTab} />

                    {/* Deep Logic Drawer */}
                    <DeepDrawer
                        isOpen={!!selectedCategory}
                        onClose={() => setSelectedCategory(null)}
                        category={selectedCategory}
                    />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    <!-- Vercel Speed Insights -->
    <script>
        window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/speed-insights/script.js"></script>
</body>

</html>
