<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- SEO Meta Tags -->
    <title>Product Categories - PlusOpinion | Browse Reviews by Category</title>
    <meta name="description"
        content="Explore product reviews across all categories - Electronics, Fashion, Food, Automotive, and more. Find authentic consumer opinions organized by product type.">
    <meta name="keywords"
        content="product categories, electronics reviews, fashion reviews, food reviews, automotive reviews, category browse, product types">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D42E61TP4M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-D42E61TP4M');
    </script>

    <!-- Favicon for browser tabs -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icon-192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-192.png">

    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#020205">
    <link rel="icon" href="./icon-192.png">
    <link rel="icon" href="./icon-512.png">


    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Global Design System -->
    <link rel="stylesheet" href="./global.css">

    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#020205">

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>

    <script src="./runtime.js"></script>
    <script src="api.js?v=3.2"></script>
    <!-- Categories will be dynamically generated from user posts and tags -->

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>if ("serviceWorker" in navigator) { window.addEventListener("load", () => { navigator.serviceWorker.register("./service-worker.js"); }); }</script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <!-- Visual Tokens (MATCHING HOMEPAGE_FINAL.HTML) -->
    <style>
        :root {
            --font-body: 'Inter', system-ui, -apple-system, sans-serif;
            --font-heading: 'Space Grotesk', system-ui, serif;

            --bg-deep: #020205;
            --neon: #2f8bff;
            --neon-weak: rgba(47, 139, 255, 0.18);
            --muted: rgba(255, 255, 255, 0.65);
            --card: rgba(255, 255, 255, 0.04);
            --glass-border: rgba(255, 255, 255, 0.08);
            --accent-green: #6BFFB6;

            --radius: 16px;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            background-color: var(--bg-deep);
            color: white;
            font-family: var(--font-body);
            -webkit-tap-highlight-color: transparent;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- ALIVE BACKGROUND --- */
        .ambient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at 50% 0%, #0a0e1c 0%, var(--bg-deep) 80%);
            z-index: -2;
            pointer-events: none;
            transform: translateZ(0);
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.6;
            animation: breathe 8s infinite ease-in-out alternate;
            will-change: transform, opacity;
        }

        .orb-1 {
            top: -10%;
            left: -20%;
            width: 70vw;
            height: 70vw;
            background: radial-gradient(circle, #2f8bff, transparent);
            animation-duration: 10s;
        }

        .orb-2 {
            bottom: -10%;
            right: -20%;
            width: 80vw;
            height: 80vw;
            background: radial-gradient(circle, #4f46e5, transparent);
            animation-duration: 14s;
        }

        @keyframes breathe {
            0% {
                transform: scale(1);
                opacity: 0.5;
            }

            100% {
                transform: scale(1.1);
                opacity: 0.7;
            }
        }

        /* --- APP CONTAINER --- */
        #root {
            width: 100%;
            height: 100%;
            max-width: 450px;
            background-color: rgba(3, 4, 18, 0.65);
            backdrop-filter: blur(16px);
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 80px rgba(0, 0, 0, 0.8);
            overflow: hidden;
        }

        /* --- UTILITIES --- */
        .font-heading {
            font-family: var(--font-heading);
        }

        .glass-panel {
            background: var(--card);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            transform: translate3d(0, 0, 0);
        }

        .nav-glass {
            background: rgba(3, 4, 18, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
        }

        .top-nav-glass {
            background: rgba(3, 4, 18, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .touch-scale:active {
            transform: scale(0.96);
            transition: transform 0.1s;
        }

        /* 3D CUBOID CARD EFFECT */
        .cat-card-3d {
            position: relative;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.02) 100%);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 1px solid rgba(255, 255, 255, 0.05);
            border-right: 1px solid rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(0, 0, 0, 0.4);
            box-shadow:
                0 4px 6px rgba(0, 0, 0, 0.3),
                0 10px 20px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transform-style: preserve-3d;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .cat-card-3d:active {
            transform: translateY(2px) scale(0.98);
            box-shadow:
                0 2px 4px rgba(0, 0, 0, 0.2),
                inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Subtle Tint Overlay based on Theme Color */
        .cat-card-3d::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom right, var(--tint-color), transparent);
            opacity: 0.08;
            pointer-events: none;
            border-radius: inherit;
        }

        /* DRAWER PERFORMANCE OPTIMIZATIONS */
        .drawer-overlay {
            background: rgba(0, 0, 0, 0.6);
            /* REMOVED BACKDROP BLUR for Performance during animation */
            transition: opacity 0.3s ease;
        }

        /* Forces GPU rendering */
        .hardware-accelerated {
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        /* Animations */
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Vibrant Icon Box - No gradient overlay, pure vibrant colors */
        .vibrant-icon-box {
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .vibrant-icon-box:active {
            transform: scale(0.90);
        }
    </style>

    <!-- Core Logic Scripts -->
    <script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
    <script type="module" src="./supabase.js?v=2.0"></script>
    <script type="module" src="./auth.js?v=2.0"></script>
    <script type="module" src="./api.js?v=2.0"></script>

    <!-- SPA Core Infrastructure -->
    <script src="./state_manager.js"></script>
    <script src="./router.js"></script>
    <script src="./pull_to_refresh.js"></script>
    <script src="./navigation_preloader.js"></script>

    <script type="module" src="./notifications.js?v=2.0"></script>

    <script type="module">
        import { supabase } from "./supabase.js";

        supabase.auth.onAuthStateChange((event, session) => {
            if (!session) {
                window.location.href = "index.html";
            }
        });
    </script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { neon: 'var(--neon)', muted: 'var(--muted)' },
                    fontFamily: { heading: ['Space Grotesk', 'serif'] }
                }
            }
        }
    </script>
</head>

<body>
    <div class="ambient-bg">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;

        // ðŸ”— GLOBAL NAVIGATION FUNCTION (PASTE HERE)
        const goTo = (page) => {
            window.scrollTo(0, 0);
            window.navigateTo(page);
        };

        const checkMySpaceRedirect = async () => {
            try {
                const user = await window.getCurrentUser();

                if (!user) {
                    window.navigateTo('MY-SPACE-USER.HTML');
                    return;
                }
                const { data: profile } = await window.supabase
                    .from('profiles')
                    .select('is_business_account, company_name')
                    .eq('id', user.id)
                    .single();

                if (profile && profile.is_business_account) {
                    window.navigateTo('MY-SPACE-COMPANIES.HTML');
                } else {
                    window.navigateTo('MY-SPACE-USER.HTML');
                }
            } catch (e) {
                window.navigateTo('MY-SPACE-USER.HTML');
            }
        };

        function dispatchAction(action) {
            if (window.PlusOpinionActions && window.PlusOpinionActions[action]) {
                // Already on homepage
                window.PlusOpinionActions[action]();
            } else {
                // On another page â†’ redirect with hash
                window.navigateTo(`HOMEPAGE_FINAL.HTML#${action.replace('open', '').toLowerCase()}`);
            }
        }

        const triggerAction = (action) => {
            if (window.PlusOpinionActions?.[action]) {
                window.PlusOpinionActions[action]();
            } else {
                window.navigateTo(`HOMEPAGE_FINAL.HTML#${action.replace('open', '').toLowerCase()}`);
            }
        };

        // ðŸ” PAGE â†’ TAB MAP (GLOBAL)
        const PAGE_TAB_MAP = {
            'HOMEPAGE_FINAL.HTML': 'home',
            'CATAGORYPAGE.HTML': 'categories',
            'MY-SPACE-USER.HTML': 'myspace',
            'NOTIFICATION-PANEL.HTML': 'notifs',
            'PRIVATE-OWNER-PROFILE.HTML': 'profile'
        };

        // --- ICONS ---
        const Icons = {
            Home: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><polyline points="9 22 9 12 15 12 15 22" /></svg>,
            Grid: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><rect width="7" height="7" x="3" y="3" rx="1" /><rect width="7" height="7" x="14" y="3" rx="1" /><rect width="7" height="7" x="14" y="14" rx="1" /><rect width="7" height="7" x="3" y="14" rx="1" /></svg>,
            User: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></svg>,
            Bell: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" /><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0" /></svg>,
            Search: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" /></svg>,
            ChevronRight: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6" /></svg>,
            ChevronLeft: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m15 18-6-6 6-6" /></svg>,
            Menu: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12" /><line x1="4" x2="20" y1="6" y2="6" /><line x1="4" x2="20" y1="18" y2="18" /></svg>,
            Cpu: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="4" width="16" height="16" rx="2" /><rect x="9" y="9" width="6" height="6" /><line x1="9" x2="9" y1="1" y2="4" /><line x1="15" x2="15" y1="1" y2="4" /><line x1="9" x2="9" y1="20" y2="23" /><line x1="15" x2="15" y1="20" y2="23" /><line x1="20" x2="23" y1="9" y2="9" /><line x1="20" x2="23" y1="14" y2="14" /><line x1="1" x2="4" y1="9" y2="9" /><line x1="1" x2="4" y1="14" y2="14" /></svg>,
            Shirt: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M20.38 3.46L16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z" /></svg>,
            Coffee: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M17 8h1a4 4 0 1 1 0 8h-1" /><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z" /><line x1="6" x2="6" y1="2" y2="6" /><line x1="10" x2="10" y1="2" y2="6" /><line x1="14" x2="14" y1="2" y2="6" /></svg>,
            Car: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2" /><circle cx="7" cy="17" r="2" /><circle cx="17" cy="17" r="2" /></svg>,
            Heart: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" /></svg>,
            Landmark: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><line x1="3" x2="21" y1="22" y2="22" /><line x1="6" x2="6" y1="18" y2="11" /><line x1="10" x2="10" y1="18" y2="11" /><line x1="14" x2="14" y1="18" y2="11" /><line x1="18" x2="18" y1="18" y2="11" /><polygon points="12 2 20 7 4 7" /></svg>,
            Armchair: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3" /><path d="M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z" /><path d="M5 18v2" /><path d="M19 18v2" /></svg>,
            BookOpen: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></svg>,
            Plane: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12h5" /><path d="M13 12h3" /><path d="M13 2c7.75 0 8.97 2.47 9 10 0 8.95-3.6 9.87-9 10" /><path d="M10 16.6c5.56.86 10-.9 10-4.6 0-4.66-6.66-2-6-6" /></svg>,
            Plus: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><path d="M12 5v14M5 12h14" /></svg>,
            X: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>,
            Trending: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18" /><polyline points="17 6 23 6 23 12" /></svg>,
            Briefcase: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="14" x="2" y="7" rx="2" ry="2" /><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" /></svg>,
            Gamepad: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><line x1="6" x2="10" y1="12" y2="12" /><line x1="8" x2="8" y1="10" y2="14" /><line x1="15" x2="15.01" y1="13" y2="13" /><line x1="18" x2="18.01" y1="11" y2="11" /><rect width="20" height="12" x="2" y="6" rx="2" /></svg>,
            Music: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M9 18V5l12-2v13" /><circle cx="6" cy="18" r="3" /><circle cx="18" cy="16" r="3" /></svg>,
            Paw: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="5" r="2" /><circle cx="6" cy="8" r="2" /><circle cx="18" cy="8" r="2" /><path d="M18.8 13.9a3.6 3.6 0 0 0-3.6-2.9 3.6 3.6 0 0 0-3.6 2.9 3.6 3.6 0 0 1-7.2 0 6 6 0 0 1 12 0 3.6 3.6 0 0 0 2.4-3Z" /></svg>,
            Camera: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" /><circle cx="12" cy="13" r="3" /></svg>,
            Dumbbell: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m6.5 6.5 11 11" /><path d="m21 21-1-1" /><path d="m3 3 1 1" /><path d="m18 22 4-4" /><path d="m2 6 4-4" /><path d="m3 10 7-7" /><path d="m14 21 7-7" /></svg>,
            Tent: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M3.5 21 14 3" /><path d="M20.5 21 10 3" /><path d="M15.5 21 12 15l-3.5 6" /><path d="M2 21h20" /></svg>,
            DollarSign: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><line x1="12" x2="12" y1="2" y2="22" /><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" /></svg>,
            MySpaceLogo: (p) => (
                <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M11 3L3 22" strokeLinejoin="bevel" />
                    <path d="M21 22L11 3" strokeLinejoin="bevel" />
                    <path d="M22 8L4 18" strokeWidth="2.5" />
                </svg>
            ),
            // Additional Icons for Categories
            Film: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" /><path d="M7 3v18" /><path d="M3 7.5h4" /><path d="M3 12h18" /><path d="M3 16.5h4" /><path d="M17 3v18" /><path d="M17 7.5h4" /><path d="M17 16.5h4" /></svg>,
            Book: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20" /></svg>,
            Activity: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2" /></svg>,
            MapPin: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" /><circle cx="12" cy="10" r="3" /></svg>,
            ShoppingBag: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" /><path d="M3 6h18" /><path d="M16 10a4 4 0 0 1-8 0" /></svg>,
            Zap: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" /></svg>,
            Truck: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2" /><path d="M15 18H9" /><path d="M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14" /><circle cx="17" cy="18" r="2" /><circle cx="7" cy="18" r="2" /></svg>,
            PenTool: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19 7-7 3 3-7 7-3-3z" /><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z" /><path d="m2 2 7.586 7.586" /><circle cx="11" cy="11" r="2" /></svg>,
            Tool: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" /></svg>,
            Radio: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M4.9 19.1C1 15.2 1 8.8 4.9 4.9" /><path d="M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5" /><circle cx="12" cy="12" r="2" /><path d="M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5" /><path d="M19.1 4.9C23 8.8 23 15.1 19.1 19" /></svg>,
            Atom: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="1" /><path d="M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z" /><path d="M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z" /></svg>,
            GraduationCap: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z" /><path d="M6 12v5c3 3 9 3 12 0v-5" /></svg>,
            MoreHorizontal: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="1" /><circle cx="19" cy="12" r="1" /><circle cx="5" cy="12" r="1" /></svg>,
            Sparkles: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" /><path d="M5 3v4" /><path d="M19 17v4" /><path d="M3 5h4" /><path d="M17 19h4" /></svg>,
            Wallet: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1" /><path d="M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4" /></svg>
        };

        const Icon = ({ icon, size = 20, className = "" }) => {
            const Component = Icons[icon];
            if (!Component) return null;
            return <Component width={size} height={size} className={className} />;
        };

        const vibrate = (pattern = 5) => {
            if (typeof navigator !== 'undefined' && navigator.vibrate) {
                navigator.vibrate(pattern);
            }
        };

        // Comprehensive Category Color Map
        const CATEGORY_COLORS = {
            // Technology & Electronics
            'technology': '#22D3EE',
            'tech': '#22D3EE',
            'electronics': '#22D3EE',

            // Gaming
            'gaming': '#D946EF',
            'games': '#D946EF',

            // Fashion & Apparel
            'fashion': '#EC4899',
            'apparel': '#EC4899',
            'clothing': '#EC4899',

            // Food & Beverage
            'food': '#F97316',
            'food & drink': '#F97316',
            'food & bev': '#F97316',
            'beverage': '#F97316',
            'restaurants': '#F97316',

            // Personal Care & Beauty
            'personal care': '#A855F7',
            'beauty': '#A855F7',
            'cosmetics': '#A855F7',

            // Automotive
            'automotive': '#10B981',
            'cars': '#10B981',
            'vehicles': '#10B981',

            // Home & Living
            'home': '#EC4899',
            'home & living': '#EC4899',
            'furniture': '#EC4899',

            // Travel
            'travel': '#0EA5E9',
            'tourism': '#0EA5E9',

            // Finance
            'finance': '#3B82F6',
            'banking': '#3B82F6',

            // Education
            'education': '#8B5CF6',
            'learning': '#8B5CF6',

            // Office & Business
            'office': '#6B7280',
            'business': '#6B7280',
            'work': '#6B7280',

            // Entertainment
            'movies': '#8B5CF6',
            'music': '#EC4899',
            'books': '#3B82F6',
            'entertainment': '#A855F7',

            // Health & Fitness
            'health': '#10B981',
            'fitness': '#10B981',
            'wellness': '#10B981',

            // Sports
            'sports': '#F97316',
            'outdoor': '#10B981',

            // Photography
            'photography': '#6B7280',
            'camera': '#6B7280',

            // Pets
            'pets': '#F97316',
            'animals': '#F97316',

            // Science
            'science': '#3B82F6',

            // Others / Miscellaneous
            'others': '#6B7280',
            'miscellaneous': '#6B7280',

            // Default fallback
            'default': '#6B7280'
        };

        // Helper function to assign color to category
        const getCategoryColor = (category) => {
            // Only use category.color if it's a valid hex/rgb color (starts with # or rgb)
            if (category.color && (category.color.startsWith('#') || category.color.startsWith('rgb'))) {
                return category.color;
            }
            const name = category.name?.toLowerCase() || category.id?.toLowerCase() || '';
            return CATEGORY_COLORS[name] || CATEGORY_COLORS['default'];
        };

        // State maintained in App component and Supabase
        // Removed static DEEP_DB logic

        // --- COMPONENTS ---

        // REPLACED WITH MY SPACE NAV BAR COMPONENT
        const NavItem = ({ icon, label, isActive, onClick, isMySpace, badge }) => (
            <button
                onClick={() => {
                    vibrate(5);
                    if (isMySpace) {
                        checkMySpaceRedirect();
                    } else if (onClick) {
                        onClick();
                    }
                }}
                className={`relative group flex flex-col items-center justify-center w-16 h-16 ${isActive ? '' : ''}`}
            >
                <div
                    className={`relative ${isMySpace ? 'myspace-trigger' : ''} transition-all duration-300`}
                    style={{
                        padding: isActive ? '10px' : '6px',
                        borderRadius: isActive ? '16px' : '12px',
                        backgroundColor: isActive ? 'rgba(255, 255, 255, 0.08)' : 'transparent'
                    }}
                >
                    <Icon icon={icon} size={24} className={`${isActive ? 'text-white glow-white stroke-[2.5px]' : 'text-muted group-hover:text-white stroke-[1.5px]'}`} />

                    {/* Badge Logic */}
                    {badge > 0 && (
                        <div className="absolute -top-1 -right-1 flex items-center justify-center min-w-[18px] h-[18px] bg-blue-500 rounded-full border-2 border-[#020205] z-50 animate-pulse-subtle">
                            <span className="absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75 animate-ping"></span>
                            <span className="relative text-[10px] font-bold text-white px-1 leading-none">
                                {badge > 99 ? '99+' : badge}
                            </span>
                        </div>
                    )}

                </div>
            </button>
        );

        // REPLACED WITH MY SPACE BOTTOM NAV


        // PREMIUM 3D CATEGORY CARD (High-depth button effect, horizontal layout)
        const CategoryCard = ({ cat, onClick, type = 'standard' }) => {
            const color = getCategoryColor(cat);
            // Fix Finance logo missing
            const iconName = (cat.name || cat.title)?.toLowerCase() === 'finance' ? 'Wallet' : cat.icon;

            return (
                <div
                    onClick={() => { vibrate(5); onClick(cat); }}
                    className="rounded-xl flex items-center gap-3.5 p-4 cursor-pointer group transition-all duration-300 hover:translate-y-[-5px] active:translate-y-[-1px] active:shadow-inner"
                    style={{
                        backgroundColor: '#161922',
                        border: '1px solid rgba(255,255,255,0.08)',
                        borderBottom: '3px solid rgba(0,0,0,0.3)', // Button depth effect
                        boxShadow: '0 6px 0 rgba(0,0,0,0.2), 0 10px 15px -3px rgba(0,0,0,0.5)',
                        '--hover-shadow': `0 12px 24px -8px ${color}44`
                    }}
                    onMouseEnter={(e) => e.currentTarget.style.boxShadow = `0 4px 0 rgba(0,0,0,0.3), 0 15px 25px -10px ${color}44`}
                    onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 6px 0 rgba(0,0,0,0.2), 0 10px 15px -3px rgba(0,0,0,0.5)'}
                >
                    {/* Compact Icon Box (Left) - Enhanced 3D */}
                    <div
                        className="w-10 h-10 flex items-center justify-center shrink-0 transition-all duration-300 group-hover:scale-110 group-hover:rotate-3"
                        style={{
                            backgroundColor: color,
                            borderRadius: '10px',
                            background: `linear-gradient(145deg, ${color} 0%, ${color}DD 100%)`,
                            boxShadow: `0 4px 12px -2px ${color}88, inset 0 2px 4px rgba(255,255,255,0.3)`
                        }}
                    >
                        <Icon icon={iconName} size={18} className="text-white" />
                    </div>
                    {/* Text Content (Right) */}
                    <div className="flex flex-col min-w-0">
                        <h3 className="font-semibold text-white text-[13px] tracking-wide truncate">{cat.name || cat.title}</h3>
                        <span className="text-[10px] text-white/40 font-bold uppercase tracking-tighter">
                            {cat.posts_count > 0 ? `${cat.posts_count} opinions` : 'Explore'}
                        </span>
                    </div>
                </div>
            );
        };

        // SLEEK 3D LIST ITEM FOR "ALL CATEGORIES" (Zoom and Lift animation)
        const ListItem = ({ cat, onClick }) => {
            const color = getCategoryColor(cat);
            // Fix Finance logo missing
            const iconName = (cat.name || cat.title)?.toLowerCase() === 'finance' ? 'Wallet' : cat.icon;

            return (
                <div
                    onClick={() => { vibrate(5); onClick(cat); }}
                    className="flex items-center justify-between p-3.5 rounded-xl border border-white/[0.05] bg-[#12151C] transition-all duration-300 cursor-pointer group hover:translate-y-[-3px] hover:bg-white/[0.04] hover:shadow-lg"
                    style={{
                        boxShadow: '0 4px 6px -1px rgba(0,0,0,0.2)'
                    }}
                >
                    <div className="flex items-center gap-4">
                        <div
                            className="w-9 h-9 flex items-center justify-center shrink-0 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-6"
                            style={{
                                backgroundColor: color,
                                borderRadius: '9px',
                                background: `linear-gradient(145deg, ${color} 0%, ${color}DD 100%)`,
                                boxShadow: `0 4px 10px -2px ${color}44`
                            }}
                        >
                            <Icon icon={iconName} size={16} className="text-white" />
                        </div>
                        <span className="text-[14px] font-semibold text-white/90 group-hover:text-white transition-colors">{cat.name || cat.title}</span>
                        {cat.posts_count > 0 && (
                            <span className="text-[10px] text-white/30 font-medium ml-2">{cat.posts_count} opinions</span>
                        )}
                    </div>
                    <div className="w-6 h-6 flex items-center justify-center transition-transform duration-300 group-hover:translate-x-1">
                        <Icon icon="ChevronRight" size={16} className="text-white/20 group-hover:text-white/50" />
                    </div>
                </div>
            );
        };

        // --- SKELETON LOADERS (Matches exact UI layout) ---
        const SkeletonCard = () => (
            <div className="rounded-xl flex items-center gap-3.5 p-4 border border-white/5 bg-white/[0.02] animate-pulse">
                <div className="w-10 h-10 rounded-lg bg-white/5 shrink-0" />
                <div className="flex-1 space-y-2">
                    <div className="h-4 w-2/3 bg-white/5 rounded" />
                    <div className="h-2 w-1/3 bg-white/5 rounded" />
                </div>
            </div>
        );

        const SkeletonListItem = () => (
            <div className="flex items-center justify-between p-3.5 rounded-xl border border-white/5 bg-white/[0.01] animate-pulse">
                <div className="flex items-center gap-4 w-full">
                    <div className="w-9 h-9 rounded-lg bg-white/5 shrink-0" />
                    <div className="h-4 w-1/2 bg-white/5 rounded" />
                </div>
            </div>
        );

        const CategorySkeleton = () => (
            <div className="space-y-10">
                {/* Popular Skeleton */}
                <section>
                    <div className="flex items-center gap-2.5 mb-4 px-1">
                        <div className="w-1 h-5 bg-white/10 rounded-full" />
                        <div className="h-4 w-32 bg-white/5 rounded" />
                    </div>
                    <div className="grid grid-cols-2 gap-3">
                        {[1, 2, 3, 4].map(idx => <SkeletonCard key={idx} />)}
                    </div>
                </section>
                {/* Recommended Skeleton */}
                <section>
                    <div className="flex items-center gap-2.5 mb-4 px-1">
                        <div className="w-1 h-5 bg-white/10 rounded-full" />
                        <div className="h-4 w-40 bg-white/5 rounded" />
                    </div>
                    <div className="h-32 rounded-2xl border border-dashed border-white/10 bg-white/[0.01]" />
                </section>
                {/* All Cats Skeleton */}
                <section>
                    <div className="flex items-center gap-2.5 mb-4 px-1">
                        <div className="w-1 h-5 bg-white/10 rounded-full" />
                        <div className="h-4 w-28 bg-white/5 rounded" />
                    </div>
                    <div className="grid grid-cols-1 gap-2.5">
                        {[1, 2, 3, 4, 5, 6].map(idx => <SkeletonListItem key={idx} />)}
                    </div>
                </section>
            </div>
        );




        const App = () => {
            // Removed local selectedCategory state as we redirect immediately
            const activeTab = 'categories';
            const [categories, setCategories] = useState([]);
            const [popularCats, setPopularCats] = useState([]);
            const [recommendedCats, setRecommendedCats] = useState([]);
            const [loading, setLoading] = useState(true);
            const [navVisible, setNavVisible] = useState(true);
            const lastY = useRef(0);

            const handleScroll = (e) => {
                const currentY = e.target.scrollTop;
                const isScrollingDown = currentY > lastY.current;

                if (isScrollingDown && currentY > 50) {
                    setNavVisible(false);
                } else if (!isScrollingDown) {
                    setNavVisible(true);
                }
                lastY.current = currentY;
            };

            const handleCategoryClick = (category) => {
                vibrate(5);
                // Direct navigation to homepage with filter - use name for display
                const catName = (category.name || category.title || category.id)?.toLowerCase().trim();
                if (catName) {
                    window.navigateTo(`HOMEPAGE_FINAL.HTML#category=${encodeURIComponent(catName)}`);
                }
            };


            useEffect(() => {
                let isMounted = true;
                const loadAllData = async () => {
                    if (!isMounted) return;

                    const cacheKey = 'categories_data';

                    // CACHE-FIRST: Try to load from cache first
                    if (window.StateManager) {
                        const cachedData = await window.StateManager.get(cacheKey);
                        if (cachedData && isMounted) {
                            console.log('ðŸ“¦ Loading categories from cache');
                            setCategories(cachedData.all || []);
                            setPopularCats(cachedData.popular || []);
                            setRecommendedCats(cachedData.recommended || []);
                            setLoading(false);
                            // Continue to fetch fresh data in background
                        }
                    }

                    try {
                        const [all, popular, recommended] = await Promise.all([
                            window.getCategories().catch(e => { console.warn("getCategories failed", e); return []; }),
                            window.getPopularCategories(6).catch(e => { console.warn("getPopularCategories failed", e); return []; }),
                            window.getRecommendedCategories(4).catch(e => { console.warn("getRecommendedCategories failed", e); return []; })
                        ]);

                        if (isMounted) {
                            setCategories(all || []);
                            setPopularCats(popular || []);
                            setRecommendedCats(recommended || []);

                            // SAVE TO CACHE (10 minute TTL)
                            if (window.StateManager) {
                                await window.StateManager.set(cacheKey, {
                                    all,
                                    popular,
                                    recommended
                                }, { ttl: 10 * 60 * 1000 });
                                console.log('ðŸ’¾ Saved categories to cache');
                            }
                        }
                    } catch (e) {
                        console.error("Failed to load categories", e);
                    } finally {
                        if (isMounted) setLoading(false);
                    }
                };
                loadAllData();
                return () => { isMounted = false; };
            }, []);

            // Setup pull-to-refresh handler
            useEffect(() => {
                const setupPullToRefresh = () => {
                    if (window.PullToRefresh) {
                        window.PullToRefresh.onRefresh(async () => {
                            // Invalidate cache
                            if (window.StateManager) {
                                window.StateManager.invalidate('categories');
                            }
                            // Reload page
                            window.location.reload();
                        });
                    } else {
                        setTimeout(setupPullToRefresh, 100);
                    }
                };
                setTimeout(setupPullToRefresh, 200);
            }, []);

            const displayPopular = popularCats.length > 0 ? popularCats : categories.filter(c => c.section === 'popular').slice(0, 6);

            const allCats = React.useMemo(() =>
                [...categories].sort((a, b) => (a.name || a.title).localeCompare(b.name || b.title)),
                [categories]
            );

            return (
                <div className="flex-1 flex flex-col h-full relative overflow-hidden">

                    {/* Header: Centered & Premium - FIXED */}
                    <div className={`fixed top-0 left-0 w-full h-[65px] top-nav-glass flex items-center justify-between px-6 z-40 transition-transform duration-500 ease-out ${navVisible ? 'translate-y-0' : '-translate-y-full'}`}>
                        <button onClick={() => triggerAction('openMenu')} className="touch-scale w-10 h-10 flex items-center justify-start text-white/70 hover:text-white">
                            <Icon icon="Menu" size={24} />
                        </button>
                        <span className="font-heading font-bold text-lg tracking-widest text-white uppercase opacity-95">Categories</span>
                        <button onClick={() => triggerAction('openLens')} className="touch-scale w-10 h-10 flex items-center justify-end text-white/70 hover:text-white">
                            <Icon icon="Search" size={22} />
                        </button>
                    </div>

                    {/* Content - FULL SCREEN STRETCH */}
                    <div className="absolute inset-0 overflow-y-auto px-5 pt-[75px] pb-28 no-scrollbar scroll-smooth" onScroll={handleScroll}>
                        {loading ? (
                            <CategorySkeleton />
                        ) : (
                            <div className="space-y-10">
                                {/* 1. POPULAR SECTION */}
                                {displayPopular.length > 0 && (
                                    <section className="animate-fade-in">
                                        <div className="flex items-center justify-between mb-4 px-1">
                                            <div className="flex items-center gap-2.5">
                                                <div className="w-1 h-5 bg-neon rounded-full"></div>
                                                <h2 className="text-sm font-heading font-semibold text-white/90 tracking-tight">Popular Right Now</h2>
                                            </div>
                                            <span className="text-[9px] font-medium text-neon/80 bg-neon/10 px-2 py-0.5 rounded-md uppercase tracking-wider">Trending</span>
                                        </div>
                                        <div className="grid grid-cols-2 gap-3">
                                            {displayPopular.slice(0, 4).map(cat => (
                                                <CategoryCard key={cat.id} cat={cat} onClick={handleCategoryClick} />
                                            ))}
                                        </div>
                                    </section>
                                )}

                                {/* 2. RECOMMENDED (FOR YOU) */}
                                <section className="animate-fade-in" style={{ animationDelay: '0.1s' }}>
                                    <div className="flex items-center justify-between mb-4 px-1">
                                        <div className="flex items-center gap-2.5">
                                            <div className="w-1 h-5 bg-neon rounded-full"></div>
                                            <h2 className="text-sm font-heading font-semibold text-white/90 tracking-tight">Recommended Categories</h2>
                                        </div>
                                    </div>
                                    <div className="group relative flex flex-col items-center justify-center py-10 px-6 rounded-2xl border border-dashed border-white/10 bg-white/[0.01] transition-all duration-300 hover:bg-white/[0.03] hover:border-neon/30 active:scale-[0.98] cursor-pointer">
                                        <div className="flex items-center gap-3 mb-2">
                                            <Icon icon="Sparkles" size={16} className="text-white/40 group-hover:text-neon group-hover:animate-pulse transition-colors" />
                                            <span className="text-xs font-bold text-white/50 group-hover:text-white uppercase tracking-widest transition-colors">Personalized Recommendations</span>
                                        </div>
                                        <div className="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-white/10 bg-white/[0.02] mt-2 transition-all group-hover:border-neon/20 group-hover:bg-neon/5">
                                            <span className="text-[9px] text-white/40 group-hover:text-neon font-bold uppercase tracking-widest">Post-Beta Feature</span>
                                        </div>
                                    </div>
                                </section>

                                {/* 3. ALL CATEGORIES SECTION */}
                                <section className="animate-fade-in" style={{ animationDelay: '0.2s' }}>
                                    <div className="flex items-center justify-between mb-4 px-1">
                                        <div className="flex items-center gap-2.5">
                                            <div className="w-1 h-5 bg-neon rounded-full"></div>
                                            <h2 className="text-sm font-heading font-semibold text-white/90 tracking-tight">All Categories</h2>
                                        </div>
                                        <Icon icon="Grid" size={14} className="text-muted/40" />
                                    </div>
                                    <div className="grid grid-cols-1 gap-2.5">
                                        {allCats.map(cat => (
                                            <ListItem key={cat.id} cat={cat} onClick={handleCategoryClick} />
                                        ))}
                                    </div>
                                </section>
                            </div>
                        )}
                    </div>

                    {/* 4. Bottom Nav - FIXED */}
                    <BottomNav activeTab={activeTab} isVisible={navVisible} />

                </div>
            );
        };

        const BottomNav = ({ activeTab, isVisible = true }) => {
            // Initialize with cached value to prevent flicker
            const [unreadCount, setUnreadCount] = useState(() => {
                return window.getUnreadCountFromCache ? window.getUnreadCountFromCache() : 0;
            });

            useEffect(() => {
                // Subscribe to real-time unread count
                const unsubscribe = window.subscribeToUnreadCount && window.subscribeToUnreadCount((count) => {
                    setUnreadCount(count);
                });

                return () => {
                    if (unsubscribe && typeof unsubscribe === 'function') unsubscribe();
                };
            }, []);

            return (
                <div className={`nav-glass fixed bottom-0 left-0 w-full h-[65px] px-2 pb-2 flex justify-between items-center z-40 transition-transform duration-500 ease-out ${isVisible ? 'translate-y-0' : 'translate-y-full'}`}>
                    <NavItem icon="Home" label="Home" isActive={activeTab === 'home'} onClick={() => goTo('HOMEPAGE_FINAL.HTML')} />
                    <NavItem icon="Grid" label="Categories" isActive={activeTab === 'categories'} onClick={() => { }} />
                    <NavItem icon="MySpaceLogo" label="My Space" isActive={activeTab === 'myspace'} isMySpace={true} />
                    <NavItem
                        icon="Bell"
                        label="Notifications"
                        isActive={activeTab === 'notifs'}
                        onClick={() => goTo('NOTIFICATION-PANEL.HTML')}
                        badge={unreadCount}
                    />
                    <NavItem icon="User" label="Profile" isActive={activeTab === 'profile'} onClick={() => goTo('PRIVATE-OWNER-PROFILE.HTML')} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    <!-- Vercel Speed Insights -->
    <script>
        window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/speed-insights/script.js"></script>
</body>

</html>
